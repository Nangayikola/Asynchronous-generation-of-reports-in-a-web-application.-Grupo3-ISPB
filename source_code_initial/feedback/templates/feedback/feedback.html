{% extends 'feedback/base.html' %}

<!DOCTYPE html>
<html>
<head>
  <title>Título da Página</title>
</head>
<body>
    {% block content %}
    <h1>Olá! Como vai?</h1>
    
    <p>Por favor envie-nos o seu feedback.</p>

    <button id="report"> Gerar Relatório </button>
    
    
    

    <script>
        const button = document.querySelector("#report");
        console.log("Sucesso")
        button.addEventListener("click", (event) => {
            
        fetch("{% url 'gerar_relatorio' %}", {
                method: 'GET' 
            })
            .then(response => response.json())
            .then(data => {
               
                console.log(data);
            })
            .catch(error => {
                
                console.log(err)
            });
        });

        

        // Função para enviar a solicitação de long polling
       /* function longPolling() {
            $.ajax({
                type: "POST",
            //      // Substitua 'long_polling_endpoint' pela URL da sua view de long polling
                data: $('#my-form').serialize(),  // Serialize o formulário para enviar os dados
                success: function(data) {
                    // Lógica para manipular a resposta recebida
                    // Atualize a interface do usuário com os dados recebidos
                    // Chame longPolling() novamente para estabelecer uma nova solicitação de long polling
                    longPolling();
                },
                error: function(xhr, status, error) {
                    // Lógica para lidar com erros, se necessário
                }
            });
        }
    
        // Chame a função de long polling quando a página for carregada
        $(document).ready(function() {
            longPolling();
        });*/
    </script>

    {% endblock content %}
  <footer>
    <p>&copy; 2023 Meu Site. Todos os direitos reservados.</p>
  </footer>
</body>
</html>
